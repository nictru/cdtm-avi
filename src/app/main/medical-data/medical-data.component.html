<div class="medical-data-container">
    <div class="tabs-container">
        <div class="tab" [class.active]="activeTab === 'general'" (click)="setActiveTab('general')">
            General Information
        </div>
        <div class="tab" [class.active]="activeTab === 'documents'" (click)="setActiveTab('documents')">
            Documents
        </div>
        <div class="tab" [class.active]="activeTab === 'chat'" (click)="setActiveTab('chat')">
            Chat
        </div>
    </div>

    <div class="tab-content">
        <!-- General Information Tab -->
        <div class="tab-pane" *ngIf="activeTab === 'general'">
            <h2>General Information</h2>
            <div class="info-content">
                <p>This section will contain general patient information.</p>
                <!-- Additional content for general information would go here -->
            </div>
        </div>

        <!-- Documents Tab -->
        <div class="tab-pane" *ngIf="activeTab === 'documents'">
            <h2>Documents</h2>
            <div class="documents-list">
                @if (userDocs.value().length === 0) {
                <p class="no-documents">No documents available.</p>
                } @else {
                @for (doc of userDocs.value(); track doc.id) {
                <div class="document-item">
                    <div class="document-icon">
                        <i class="fas fa-file-alt"></i>
                    </div>
                    <div class="document-details">
                        <div class="document-header">
                            <h3>{{ extractDocumentName(doc.doc_name) }}</h3>
                            <span class="document-type">{{ doc.doc_type }}</span>
                        </div>

                        @if (doc.medical_record) {
                        <div class="medical-record-details">
                            <h4>{{ doc.medical_record.title }}</h4>
                            <p class="hospital">{{ doc.medical_record.hospital_or_agency }}</p>
                            <div class="meta-info">
                                <span class="date">Date: {{ doc.medical_record.date_of_issue | date:'mediumDate'
                                    }}</span>
                                <span class="doctor">Doctor: {{ doc.medical_record.doctor_name }}</span>
                            </div>
                            <p class="summary">{{ doc.medical_record.summary }}</p>
                        </div>
                        }

                        <p class="document-date">Uploaded: {{ doc.created_at | date:'medium' }}</p>
                    </div>
                </div>
                }
                }
            </div>
        </div>

        <!-- Chat Tab -->
        <div class="tab-pane" *ngIf="activeTab === 'chat'">
            <h2>Chat with your Health Assistant</h2>
            <app-chat></app-chat>
        </div>
    </div>
</div>